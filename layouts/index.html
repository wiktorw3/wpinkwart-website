{{ define "main" }}
    <main aria-role="main">
        <div class="home-container">
            <h1>{{ .Site.Title }}</h1>

            <div class="typing-container">
                <span id="typed-text"></span><span class="cursor">|</span>
            </div>

            {{- with .Site.Params.social }}
                <div class="social-icons">
                    {{ partial "social-icons.html" . }}
                </div>
            {{- end }}
        </div>
    </main>

    <style>
    .home-container {
        text-align: center;
    }
    
    .typing-container {
        min-height: 2rem;
        margin: 1.5rem 0 2rem 0;
        font-size: 1.2rem;
        color: var(--accent);
        font-weight: 400;
    }
    
    #typed-text {
        letter-spacing: 0.05em;
    }
    
    .cursor {
        animation: blink 1s infinite;
        color: var(--accent);
        font-weight: 300;
    }
    
    @keyframes blink {
        0%, 50% { opacity: 1; }
        51%, 100% { opacity: 0; }
    }
    
    .social-icons {
        margin-top: 1rem;
    }
    </style>

    <script>
    (function() {
        const words = [
            {{ if eq .Site.Language.Lang "pl" }}
            "Technologia", "Produkt", "Prawo", "Muzyka"
            {{ else }}
            "Tech", "Product", "Law", "Music"
            {{ end }}
        ];
        
        const typedElement = document.getElementById('typed-text');
        const separator = " Â· ";
        
        let wordIndex = 0;
        let charIndex = 0;
        let currentText = "";
        let isDeleting = false;
        let isPaused = false;
        
        const typeSpeed = 80;
        const pauseAfterWord = 600;
        const pauseAfterAll = 2000;
        
        function type() {
            if (wordIndex >= words.length) {
                // All words typed, pause then stay
                setTimeout(() => {
                    // Keep the final text
                }, pauseAfterAll);
                return;
            }
            
            const currentWord = words[wordIndex];
            
            if (charIndex <= currentWord.length) {
                // Still typing current word
                const prefix = wordIndex > 0 ? currentText + separator : "";
                typedElement.textContent = prefix + currentWord.substring(0, charIndex);
                charIndex++;
                setTimeout(type, typeSpeed);
            } else {
                // Word complete
                if (wordIndex > 0) {
                    currentText += separator + currentWord;
                } else {
                    currentText = currentWord;
                }
                typedElement.textContent = currentText;
                
                wordIndex++;
                charIndex = 0;
                
                if (wordIndex < words.length) {
                    setTimeout(type, pauseAfterWord);
                } else {
                    // Hide cursor after all done
                    setTimeout(() => {
                        document.querySelector('.cursor').style.display = 'none';
                    }, 1500);
                }
            }
        }
        
        // Start typing after a short delay
        setTimeout(type, 500);
    })();
    </script>
{{ end }}

